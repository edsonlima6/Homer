  variables:
    Major: '1'
    Minor: '0'
    Patch: '0'

  steps:        
    - task: NuGetCommand@2
      displayName: 'Create Domain NuGet package'
      env:
        NUGET_PACKAGE_VERSION: $(Major)
      inputs:
        command: 'pack'
        packagesToPack: 'SkyNetRisenDomain.nuspec'
        packDestination: '$(Build.ArtifactStagingDirectory)\packages'
        versioningScheme: byEnvVar
        majorVersion: '$(Major)'
        minorVersion: '$(Minor)'
        patchVersion: '$(Patch)'
        versionEnvVar: NUGET_PACKAGE_VERSION
        configuration: '$(buildConfiguration)'
        buildProperties: 'nowarn=NU5100'

        includeSymbols: true
    
    - task: NuGetCommand@2
      displayName: 'NuGet push'
      inputs:
        command: push
        nuGetFeedType: external
        publishFeedCredentials: SkyNetRisenNuget
